<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Stripe PoC</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <script src="https://js.stripe.com/v3/"></script>
  </head>
  <body>
    <form class="example2">
      <div id="example2-card-number"></div>
      <div id="example2-card-expiry"></div>
      <div id="example2-card-cvc"></div>
      <button type="submit">Submit</button>
    </form>

    <div>Result: <span class="result"></span></div>

    <div>
      <a class="reset" href="#">Reset</a>
    </div>

    <script>
      var stripe = Stripe("pk_test_6pRNASCoBOKtIshFeQd4XMUh");

      function registerElements(elements) {
        var form = document.querySelector("form");
        var resetButton = document.querySelector("a.reset");

        form.addEventListener("submit", function (e) {
          e.preventDefault();

          stripe.createToken(elements[0]).then(function (result) {
            if (result.token) {
              document.querySelector(".result").innerText = result.token.id;
            } else {
              document.querySelector(".result").innerText =
                result.error.message;
            }
          });
        });

        resetButton.addEventListener("click", function (e) {
          e.preventDefault();
          form.reset();

          document.querySelector(".result").innerText = "";
          elements.forEach(function (element) {
            element.clear();
          });
        });
      }

      var elements = stripe.elements({});

      var cardNumber = elements.create("cardNumber", {});
      cardNumber.mount("#example2-card-number");

      var cardExpiry = elements.create("cardExpiry", {});
      cardExpiry.mount("#example2-card-expiry");

      var cardCvc = elements.create("cardCvc", {});
      cardCvc.mount("#example2-card-cvc");

      registerElements([cardNumber, cardExpiry, cardCvc]);
    </script>
  </body>
</html>
